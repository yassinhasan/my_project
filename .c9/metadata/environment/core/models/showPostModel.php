{"filter":false,"title":"showPostModel.php","tooltip":"/core/models/showPostModel.php","ace":{"folds":[],"scrolltop":150,"scrollleft":0,"selection":{"start":{"row":11,"column":57},"end":{"row":11,"column":57},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":16,"state":"php-qqstring","mode":"ace/mode/php"}},"hash":"c1e30a92dbae5425ff9957ba7d170dd16120752c","mime":"application/octet-stream","undoManager":{"mark":13,"position":13,"stack":[[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"remove","lines":["<?php namespace core\\models; use core\\app\\Rrequest; use core\\app\\Validate; use core\\models\\abstractModel; class showPostModel extends abstractModel { public function rules() { return [ ]; } }",""],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":11,"column":0},"action":"insert","lines":["<?php namespace core\\models;","use core\\app\\Rrequest;","use core\\app\\Validate;","use core\\models\\abstractModel;","class showPostModel extends abstractModel","{","    public function rules()","    {","        return [];","    }","}",""],"id":3}],[{"start":{"row":9,"column":5},"end":{"row":10,"column":0},"action":"insert","lines":["",""],"id":4},{"start":{"row":10,"column":0},"end":{"row":10,"column":4},"action":"insert","lines":["    "]},{"start":{"row":10,"column":4},"end":{"row":11,"column":0},"action":"insert","lines":["",""]},{"start":{"row":11,"column":0},"end":{"row":11,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":11,"column":0},"end":{"row":11,"column":4},"action":"remove","lines":["    "],"id":5},{"start":{"row":11,"column":0},"end":{"row":34,"column":5},"action":"insert","lines":["        public function fetchPostsById($userId ,  $loggedUserId)","    {","        $posts = $this->from(\" app_posts \" )->join(\" ","            INNER JOIN app_users  ON ","            app_users.id = app_posts.postUserId","           ","            INNER JOIN app_user_profile  ON ","             app_user_profile.userId = app_posts.postUserId","             LEFT JOIN posts_attach  ON ","            posts_attach.postId = app_posts.id ","            \")","            ->where(\" app_posts.postUserId = ? \" , $userId)","            ->select(\"","             app_posts.*  ,app_users.id as userId , app_users.firstName , app_users.lastName , app_user_profile.profileImage  ,","             posts_attach.attachment , posts_attach.attachmentType  ,","             (SELECT  COUNT(app_post_comments.postId) from app_post_comments where app_post_comments.postId = app_posts.id) as comments ,","             (SELECT  COUNT(app_post_likes.id) from app_post_likes where (app_post_likes.likeType = 'like' AND app_post_likes.postId = app_posts.id )) as liked , ","             (SELECT  COUNT(app_post_likes.id) from app_post_likes where ( app_post_likes.likeType = 'unlike' AND app_post_likes.postId = app_posts.id ) )as disliked ,","             (SELECT app_post_likes.likeType from app_post_likes where ( app_post_likes.userId =  $loggedUserId AND app_post_likes.postId = app_posts.id ) )as likeType","             \")->fetchAll();","","        return $posts;"," ","    }"]}],[{"start":{"row":11,"column":4},"end":{"row":11,"column":8},"action":"remove","lines":["    "],"id":6}],[{"start":{"row":11,"column":35},"end":{"row":11,"column":42},"action":"remove","lines":["$userId"],"id":7},{"start":{"row":11,"column":35},"end":{"row":11,"column":36},"action":"insert","lines":["$"]},{"start":{"row":11,"column":36},"end":{"row":11,"column":37},"action":"insert","lines":["p"]},{"start":{"row":11,"column":37},"end":{"row":11,"column":38},"action":"insert","lines":["o"]},{"start":{"row":11,"column":38},"end":{"row":11,"column":39},"action":"insert","lines":["s"]},{"start":{"row":11,"column":39},"end":{"row":11,"column":40},"action":"insert","lines":["t"]}],[{"start":{"row":11,"column":40},"end":{"row":11,"column":41},"action":"insert","lines":["I"],"id":8},{"start":{"row":11,"column":41},"end":{"row":11,"column":42},"action":"insert","lines":["d"]}],[{"start":{"row":11,"column":42},"end":{"row":11,"column":59},"action":"remove","lines":[" ,  $loggedUserId"],"id":9}],[{"start":{"row":16,"column":0},"end":{"row":16,"column":11},"action":"remove","lines":["           "],"id":10},{"start":{"row":15,"column":47},"end":{"row":16,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":21,"column":32},"end":{"row":21,"column":42},"action":"remove","lines":["postUserId"],"id":11},{"start":{"row":21,"column":32},"end":{"row":21,"column":33},"action":"insert","lines":["i"]},{"start":{"row":21,"column":33},"end":{"row":21,"column":34},"action":"insert","lines":["d"]}],[{"start":{"row":21,"column":43},"end":{"row":21,"column":50},"action":"remove","lines":["$userId"],"id":12},{"start":{"row":21,"column":43},"end":{"row":21,"column":50},"action":"insert","lines":["$postId"]}],[{"start":{"row":11,"column":42},"end":{"row":11,"column":43},"action":"insert","lines":[" "],"id":13},{"start":{"row":11,"column":43},"end":{"row":11,"column":44},"action":"insert","lines":[","]},{"start":{"row":11,"column":44},"end":{"row":11,"column":45},"action":"insert","lines":["$"]},{"start":{"row":11,"column":45},"end":{"row":11,"column":46},"action":"insert","lines":["l"]},{"start":{"row":11,"column":46},"end":{"row":11,"column":47},"action":"insert","lines":["o"]}],[{"start":{"row":11,"column":47},"end":{"row":11,"column":48},"action":"insert","lines":["g"],"id":15}],[{"start":{"row":11,"column":44},"end":{"row":11,"column":48},"action":"remove","lines":["$log"],"id":16},{"start":{"row":11,"column":44},"end":{"row":11,"column":57},"action":"insert","lines":["$loggedUserId"]}]]},"timestamp":1662373278907}