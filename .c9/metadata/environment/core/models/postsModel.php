{"filter":false,"title":"postsModel.php","tooltip":"/core/models/postsModel.php","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":148,"column":104},"end":{"row":148,"column":105},"action":"remove","lines":["D"],"id":109},{"start":{"row":148,"column":104},"end":{"row":148,"column":108},"action":"insert","lines":["DESC"]}],[{"start":{"row":153,"column":5},"end":{"row":154,"column":0},"action":"insert","lines":["",""],"id":110},{"start":{"row":154,"column":0},"end":{"row":154,"column":4},"action":"insert","lines":["    "]},{"start":{"row":154,"column":4},"end":{"row":155,"column":0},"action":"insert","lines":["",""]},{"start":{"row":155,"column":0},"end":{"row":155,"column":4},"action":"insert","lines":["    "]},{"start":{"row":155,"column":4},"end":{"row":155,"column":5},"action":"insert","lines":["p"]}],[{"start":{"row":155,"column":5},"end":{"row":155,"column":6},"action":"insert","lines":["i"],"id":111},{"start":{"row":155,"column":6},"end":{"row":155,"column":7},"action":"insert","lines":["b"]}],[{"start":{"row":155,"column":6},"end":{"row":155,"column":7},"action":"remove","lines":["b"],"id":112},{"start":{"row":155,"column":5},"end":{"row":155,"column":6},"action":"remove","lines":["i"]}],[{"start":{"row":155,"column":5},"end":{"row":155,"column":6},"action":"insert","lines":["u"],"id":113},{"start":{"row":155,"column":6},"end":{"row":155,"column":7},"action":"insert","lines":["b"]},{"start":{"row":155,"column":7},"end":{"row":155,"column":8},"action":"insert","lines":["l"]},{"start":{"row":155,"column":8},"end":{"row":155,"column":9},"action":"insert","lines":["i"]},{"start":{"row":155,"column":9},"end":{"row":155,"column":10},"action":"insert","lines":["c"]}],[{"start":{"row":155,"column":10},"end":{"row":155,"column":11},"action":"insert","lines":[" "],"id":114},{"start":{"row":155,"column":11},"end":{"row":155,"column":12},"action":"insert","lines":["f"]},{"start":{"row":155,"column":12},"end":{"row":155,"column":13},"action":"insert","lines":["u"]},{"start":{"row":155,"column":13},"end":{"row":155,"column":14},"action":"insert","lines":["n"]},{"start":{"row":155,"column":14},"end":{"row":155,"column":15},"action":"insert","lines":["c"]}],[{"start":{"row":155,"column":11},"end":{"row":155,"column":15},"action":"remove","lines":["func"],"id":115},{"start":{"row":155,"column":11},"end":{"row":155,"column":19},"action":"insert","lines":["function"]}],[{"start":{"row":155,"column":19},"end":{"row":155,"column":20},"action":"insert","lines":[" "],"id":116}],[{"start":{"row":155,"column":20},"end":{"row":155,"column":33},"action":"insert","lines":["deleteComment"],"id":117}],[{"start":{"row":155,"column":33},"end":{"row":155,"column":34},"action":"insert","lines":["("],"id":118},{"start":{"row":155,"column":34},"end":{"row":155,"column":35},"action":"insert","lines":[")"]}],[{"start":{"row":155,"column":34},"end":{"row":155,"column":35},"action":"insert","lines":["i"],"id":119},{"start":{"row":155,"column":35},"end":{"row":155,"column":36},"action":"insert","lines":["d"]}],[{"start":{"row":155,"column":37},"end":{"row":156,"column":0},"action":"insert","lines":["",""],"id":120},{"start":{"row":156,"column":0},"end":{"row":156,"column":4},"action":"insert","lines":["    "]},{"start":{"row":156,"column":4},"end":{"row":156,"column":5},"action":"insert","lines":["{"]},{"start":{"row":156,"column":5},"end":{"row":156,"column":6},"action":"insert","lines":["}"]}],[{"start":{"row":156,"column":5},"end":{"row":157,"column":0},"action":"insert","lines":["",""],"id":121},{"start":{"row":157,"column":0},"end":{"row":157,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":156,"column":5},"end":{"row":157,"column":0},"action":"insert","lines":["",""],"id":122},{"start":{"row":157,"column":0},"end":{"row":157,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":155,"column":34},"end":{"row":155,"column":35},"action":"insert","lines":["i"],"id":123},{"start":{"row":155,"column":35},"end":{"row":155,"column":36},"action":"insert","lines":["n"]},{"start":{"row":155,"column":36},"end":{"row":155,"column":37},"action":"insert","lines":["t"]}],[{"start":{"row":155,"column":37},"end":{"row":155,"column":38},"action":"insert","lines":[" "],"id":124}],[{"start":{"row":155,"column":34},"end":{"row":155,"column":37},"action":"remove","lines":["int"],"id":125}],[{"start":{"row":155,"column":34},"end":{"row":155,"column":35},"action":"remove","lines":[" "],"id":126}],[{"start":{"row":155,"column":34},"end":{"row":155,"column":35},"action":"insert","lines":["$"],"id":127}],[{"start":{"row":157,"column":4},"end":{"row":161,"column":26},"action":"insert","lines":["        $count =  $this->from(\" app_posts \" )","         ->where(\"app_posts.id = ? And app_posts.postUserId = ? \" , [$postId , $userId ])","         ->delete();","","        return $count > 0;"],"id":128}],[{"start":{"row":157,"column":8},"end":{"row":157,"column":12},"action":"remove","lines":["    "],"id":129}],[{"start":{"row":157,"column":32},"end":{"row":157,"column":41},"action":"remove","lines":["app_posts"],"id":130},{"start":{"row":157,"column":32},"end":{"row":157,"column":49},"action":"insert","lines":["app_post_comments"]}],[{"start":{"row":158,"column":18},"end":{"row":158,"column":27},"action":"remove","lines":["app_posts"],"id":131},{"start":{"row":158,"column":18},"end":{"row":158,"column":35},"action":"insert","lines":["app_post_comments"]}],[{"start":{"row":158,"column":43},"end":{"row":158,"column":72},"action":"remove","lines":["And app_posts.postUserId = ? "],"id":132}],[{"start":{"row":158,"column":46},"end":{"row":158,"column":67},"action":"remove","lines":[" [$postId , $userId ]"],"id":133}],[{"start":{"row":158,"column":46},"end":{"row":158,"column":47},"action":"insert","lines":[" "],"id":134},{"start":{"row":158,"column":47},"end":{"row":158,"column":48},"action":"insert","lines":["$"]},{"start":{"row":158,"column":48},"end":{"row":158,"column":49},"action":"insert","lines":["i"]},{"start":{"row":158,"column":49},"end":{"row":158,"column":50},"action":"insert","lines":["d"]}],[{"start":{"row":163,"column":0},"end":{"row":163,"column":4},"action":"remove","lines":["    "],"id":135},{"start":{"row":163,"column":0},"end":{"row":170,"column":5},"action":"insert","lines":["    public function deleteComment($id)","    {","        $count =  $this->from(\" app_post_comments \" )","         ->where(\"app_post_comments.id = ? \" , $id)","         ->delete();","","        return $count > 0;","    }"]}],[{"start":{"row":163,"column":20},"end":{"row":163,"column":26},"action":"remove","lines":["delete"],"id":136},{"start":{"row":163,"column":20},"end":{"row":163,"column":21},"action":"insert","lines":["u"]},{"start":{"row":163,"column":21},"end":{"row":163,"column":22},"action":"insert","lines":["p"]},{"start":{"row":163,"column":22},"end":{"row":163,"column":23},"action":"insert","lines":["d"]},{"start":{"row":163,"column":23},"end":{"row":163,"column":24},"action":"insert","lines":["a"]},{"start":{"row":163,"column":24},"end":{"row":163,"column":25},"action":"insert","lines":["t"]},{"start":{"row":163,"column":25},"end":{"row":163,"column":26},"action":"insert","lines":["e"]}],[{"start":{"row":167,"column":11},"end":{"row":167,"column":17},"action":"remove","lines":["delete"],"id":137},{"start":{"row":167,"column":11},"end":{"row":167,"column":12},"action":"insert","lines":["u"]},{"start":{"row":167,"column":12},"end":{"row":167,"column":13},"action":"insert","lines":["p"]},{"start":{"row":167,"column":13},"end":{"row":167,"column":14},"action":"insert","lines":["d"]},{"start":{"row":167,"column":14},"end":{"row":167,"column":15},"action":"insert","lines":["a"]},{"start":{"row":167,"column":15},"end":{"row":167,"column":16},"action":"insert","lines":["t"]},{"start":{"row":167,"column":16},"end":{"row":167,"column":17},"action":"insert","lines":["e"]}],[{"start":{"row":167,"column":17},"end":{"row":167,"column":20},"action":"remove","lines":["();"],"id":138},{"start":{"row":167,"column":17},"end":{"row":168,"column":0},"action":"insert","lines":["",""]},{"start":{"row":168,"column":0},"end":{"row":168,"column":9},"action":"insert","lines":["         "]}],[{"start":{"row":168,"column":9},"end":{"row":170,"column":101},"action":"insert","lines":["         $this->data([","        \"likeType\" => \"like\" , ","        ])->where(\"  postId = ?  AND userId = ? \" , [$postId , $userId])->update(\" app_post_likes \");"],"id":139}],[{"start":{"row":168,"column":8},"end":{"row":168,"column":18},"action":"remove","lines":["          "],"id":140}],[{"start":{"row":168,"column":8},"end":{"row":169,"column":0},"action":"insert","lines":["",""],"id":141},{"start":{"row":169,"column":0},"end":{"row":169,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":169,"column":8},"end":{"row":169,"column":17},"action":"insert","lines":["$count = "],"id":142}],[{"start":{"row":169,"column":17},"end":{"row":169,"column":18},"action":"insert","lines":[" "],"id":143}],[{"start":{"row":171,"column":83},"end":{"row":171,"column":97},"action":"remove","lines":["app_post_likes"],"id":144},{"start":{"row":171,"column":83},"end":{"row":171,"column":100},"action":"insert","lines":["app_post_comments"]}],[{"start":{"row":170,"column":9},"end":{"row":170,"column":17},"action":"remove","lines":["likeType"],"id":145},{"start":{"row":170,"column":9},"end":{"row":170,"column":16},"action":"insert","lines":["comment"]}],[{"start":{"row":163,"column":37},"end":{"row":163,"column":38},"action":"insert","lines":[" "],"id":146},{"start":{"row":163,"column":38},"end":{"row":163,"column":39},"action":"insert","lines":[","]}],[{"start":{"row":163,"column":39},"end":{"row":163,"column":40},"action":"insert","lines":[" "],"id":147},{"start":{"row":163,"column":40},"end":{"row":163,"column":41},"action":"insert","lines":["$"]},{"start":{"row":163,"column":41},"end":{"row":163,"column":42},"action":"insert","lines":["c"]},{"start":{"row":163,"column":42},"end":{"row":163,"column":43},"action":"insert","lines":["o"]}],[{"start":{"row":163,"column":43},"end":{"row":163,"column":44},"action":"insert","lines":["m"],"id":148}],[{"start":{"row":163,"column":40},"end":{"row":163,"column":44},"action":"remove","lines":["$com"],"id":149},{"start":{"row":163,"column":40},"end":{"row":163,"column":48},"action":"insert","lines":["$comment"]}],[{"start":{"row":165,"column":0},"end":{"row":167,"column":17},"action":"remove","lines":["        $count =  $this->from(\" app_post_comments \" )","         ->where(\"app_post_comments.id = ? \" , $id)","         ->update"],"id":150}],[{"start":{"row":167,"column":8},"end":{"row":167,"column":16},"action":"remove","lines":["$count ="],"id":151}],[{"start":{"row":171,"column":14},"end":{"row":171,"column":26},"action":"remove","lines":[" $count > 0;"],"id":152}],[{"start":{"row":171,"column":14},"end":{"row":171,"column":15},"action":"insert","lines":[" "],"id":153},{"start":{"row":171,"column":15},"end":{"row":171,"column":16},"action":"insert","lines":["t"]},{"start":{"row":171,"column":16},"end":{"row":171,"column":17},"action":"insert","lines":["r"]},{"start":{"row":171,"column":17},"end":{"row":171,"column":18},"action":"insert","lines":["u"]},{"start":{"row":171,"column":18},"end":{"row":171,"column":19},"action":"insert","lines":["e"]},{"start":{"row":171,"column":19},"end":{"row":171,"column":20},"action":"insert","lines":[";"]}],[{"start":{"row":167,"column":8},"end":{"row":167,"column":10},"action":"remove","lines":["  "],"id":154},{"start":{"row":167,"column":8},"end":{"row":167,"column":9},"action":"insert","lines":["i"]},{"start":{"row":167,"column":9},"end":{"row":167,"column":10},"action":"insert","lines":["f"]}],[{"start":{"row":167,"column":10},"end":{"row":167,"column":11},"action":"insert","lines":[" "],"id":155},{"start":{"row":167,"column":11},"end":{"row":167,"column":12},"action":"insert","lines":["("]}],[{"start":{"row":169,"column":103},"end":{"row":169,"column":104},"action":"remove","lines":[";"],"id":156}],[{"start":{"row":169,"column":103},"end":{"row":169,"column":104},"action":"insert","lines":[")"],"id":157}],[{"start":{"row":168,"column":21},"end":{"row":168,"column":27},"action":"remove","lines":["\"like\""],"id":158},{"start":{"row":168,"column":21},"end":{"row":168,"column":29},"action":"insert","lines":["$comment"]}],[{"start":{"row":169,"column":21},"end":{"row":169,"column":27},"action":"remove","lines":["postId"],"id":159},{"start":{"row":169,"column":21},"end":{"row":169,"column":22},"action":"insert","lines":["i"]},{"start":{"row":169,"column":22},"end":{"row":169,"column":23},"action":"insert","lines":["d"]}],[{"start":{"row":169,"column":29},"end":{"row":169,"column":44},"action":"remove","lines":["AND userId = ? "],"id":160},{"start":{"row":169,"column":28},"end":{"row":169,"column":29},"action":"remove","lines":[" "]}],[{"start":{"row":169,"column":32},"end":{"row":169,"column":51},"action":"remove","lines":["[$postId , $userId]"],"id":161}],[{"start":{"row":169,"column":32},"end":{"row":169,"column":33},"action":"insert","lines":["$"],"id":162},{"start":{"row":169,"column":33},"end":{"row":169,"column":34},"action":"insert","lines":["i"]},{"start":{"row":169,"column":34},"end":{"row":169,"column":35},"action":"insert","lines":["d"]}],[{"start":{"row":241,"column":5},"end":{"row":241,"column":23},"action":"insert","lines":["updateLastActivity"],"id":163}],[{"start":{"row":242,"column":0},"end":{"row":242,"column":5},"action":"remove","lines":["     "],"id":164},{"start":{"row":242,"column":0},"end":{"row":251,"column":5},"action":"insert","lines":["    public function updatePost($postId)","    {","        if($this->data([","            \"postText\" => $this->post ,","            \"postDateModified\" => date( 'Y-m-d H:i:s', time() )","        ])->where(\" id = ? \" , $postId)->update(self::$tableName))","        {","            return true;","        }","    }"]}],[{"start":{"row":241,"column":5},"end":{"row":241,"column":23},"action":"remove","lines":["updateLastActivity"],"id":165}],[{"start":{"row":242,"column":20},"end":{"row":242,"column":30},"action":"remove","lines":["updatePost"],"id":166},{"start":{"row":242,"column":20},"end":{"row":242,"column":38},"action":"insert","lines":["updateLastActivity"]}],[{"start":{"row":242,"column":39},"end":{"row":242,"column":46},"action":"remove","lines":["$postId"],"id":167},{"start":{"row":242,"column":39},"end":{"row":242,"column":40},"action":"insert","lines":["$"]},{"start":{"row":242,"column":40},"end":{"row":242,"column":41},"action":"insert","lines":["u"]},{"start":{"row":242,"column":41},"end":{"row":242,"column":42},"action":"insert","lines":["s"]},{"start":{"row":242,"column":42},"end":{"row":242,"column":43},"action":"insert","lines":["e"]}],[{"start":{"row":242,"column":39},"end":{"row":242,"column":43},"action":"remove","lines":["$use"],"id":168},{"start":{"row":242,"column":39},"end":{"row":242,"column":46},"action":"insert","lines":["$userId"]}],[{"start":{"row":245,"column":13},"end":{"row":245,"column":21},"action":"remove","lines":["postText"],"id":169},{"start":{"row":245,"column":13},"end":{"row":245,"column":25},"action":"insert","lines":["lastActivity"]}],[{"start":{"row":246,"column":13},"end":{"row":246,"column":29},"action":"remove","lines":["postDateModified"],"id":170},{"start":{"row":246,"column":13},"end":{"row":246,"column":25},"action":"insert","lines":["lastActivity"]}],[{"start":{"row":245,"column":0},"end":{"row":245,"column":43},"action":"remove","lines":["            \"lastActivity\" => $this->post ,"],"id":171},{"start":{"row":244,"column":24},"end":{"row":245,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":246,"column":31},"end":{"row":246,"column":38},"action":"remove","lines":["$postId"],"id":172},{"start":{"row":246,"column":31},"end":{"row":246,"column":38},"action":"insert","lines":["$userId"]}],[{"start":{"row":246,"column":48},"end":{"row":246,"column":64},"action":"remove","lines":["self::$tableName"],"id":173},{"start":{"row":246,"column":48},"end":{"row":246,"column":49},"action":"insert","lines":["\""]}],[{"start":{"row":246,"column":48},"end":{"row":246,"column":49},"action":"remove","lines":["\""],"id":174}],[{"start":{"row":246,"column":48},"end":{"row":246,"column":50},"action":"insert","lines":["\"\""],"id":175}],[{"start":{"row":246,"column":49},"end":{"row":246,"column":50},"action":"insert","lines":["a"],"id":176},{"start":{"row":246,"column":50},"end":{"row":246,"column":51},"action":"insert","lines":["p"]},{"start":{"row":246,"column":51},"end":{"row":246,"column":52},"action":"insert","lines":["p"]},{"start":{"row":246,"column":52},"end":{"row":246,"column":53},"action":"insert","lines":["_"]},{"start":{"row":246,"column":53},"end":{"row":246,"column":54},"action":"insert","lines":["u"]},{"start":{"row":246,"column":54},"end":{"row":246,"column":55},"action":"insert","lines":["s"]},{"start":{"row":246,"column":55},"end":{"row":246,"column":56},"action":"insert","lines":["e"]},{"start":{"row":246,"column":56},"end":{"row":246,"column":57},"action":"insert","lines":["r"]}],[{"start":{"row":246,"column":49},"end":{"row":246,"column":57},"action":"remove","lines":["app_user"],"id":177},{"start":{"row":246,"column":49},"end":{"row":246,"column":58},"action":"insert","lines":["app_users"]}],[{"start":{"row":250,"column":7},"end":{"row":262,"column":5},"action":"insert","lines":["","    public function updateLastActivityById($userId , $userSatus)","    {","        $userSatus == \"online\" ? 1 : 0; ","        if($this->data([","            ","            \"lastActivity\" => date( 'Y-m-d H:i:s', time() ) ,","            \"status\" => $userSatus","        ])->where(\" id = ? \" , $userId)->update(\"app_users\"))","        {","            return true;","        }","    }"],"id":178,"ignore":true},{"start":{"row":298,"column":0},"end":{"row":316,"column":0},"action":"insert","lines":["    public function fetchChatUsers($userId)","    {","        $Users = $this->from(\" app_users \" )->join(\" ","            INNER JOIN app_user_profile  ON ","            app_user_profile.userId = app_users.id","            \")->select(\"","            app_users.id , app_users.firstName , app_users.lastName , app_users.userStatus , app_users.lastActivity , app_users.email , app_user_profile.profileImage  ,","            ( select followStatus from app_users_follow where sender = $userId and receiver = app_users.id ) as followStatus  ,","              ( select COUNT(app_users_follow.receiver) from app_users_follow where receiver = app_users.id AND followStatus = 'approve') as followers  ,","              (SELECT msg from app_chat WHERE (fromId = $userId AND toId = app_users.id) or ( fromId = app_users.id AND toId = $userId )  ORDER BY msgDate DESC limit 1 ) as lastMmsg ,","              (SELECT isSeen from app_chat WHERE (fromId = $userId AND toId = app_users.id) or ( fromId = app_users.id AND toId = $userId )  ORDER BY msgDate DESC limit 1 ) as isSeen ,","              (SELECT id from app_chat WHERE (fromId = $userId AND toId = app_users.id) or ( fromId = app_users.id AND toId = $userId )  ORDER BY msgDate DESC limit 1 ) as lastMmsgId ,","              (SELECT ChatId from app_chat WHERE (fromId = $userId AND toId = app_users.id) or ( fromId = app_users.id AND toId = $userId )  ORDER BY msgDate DESC limit 1 ) as ChatId ,","               (SELECT fromId from app_chat WHERE (fromId = $userId AND toId = app_users.id) or ( fromId = app_users.id AND toId = $userId )  ORDER BY msgDate DESC limit 1 ) as fromId","            \")->fetchAll();","","        return $Users;","    }",""]}],[{"start":{"row":257,"column":13},"end":{"row":257,"column":19},"action":"remove","lines":["status"],"id":179},{"start":{"row":257,"column":13},"end":{"row":257,"column":23},"action":"insert","lines":["userStatus"]}],[{"start":{"row":245,"column":59},"end":{"row":245,"column":60},"action":"insert","lines":[" "],"id":180},{"start":{"row":245,"column":60},"end":{"row":245,"column":61},"action":"insert","lines":["و"]}],[{"start":{"row":245,"column":60},"end":{"row":245,"column":61},"action":"remove","lines":["و"],"id":181}],[{"start":{"row":245,"column":60},"end":{"row":245,"column":61},"action":"insert","lines":[" "],"id":183},{"start":{"row":245,"column":61},"end":{"row":245,"column":62},"action":"insert","lines":[","]}],[{"start":{"row":245,"column":62},"end":{"row":246,"column":0},"action":"insert","lines":["",""],"id":184},{"start":{"row":246,"column":0},"end":{"row":246,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":246,"column":12},"end":{"row":246,"column":14},"action":"insert","lines":["\"\""],"id":185}],[{"start":{"row":246,"column":13},"end":{"row":246,"column":14},"action":"insert","lines":["u"],"id":186},{"start":{"row":246,"column":14},"end":{"row":246,"column":15},"action":"insert","lines":["s"]},{"start":{"row":246,"column":15},"end":{"row":246,"column":16},"action":"insert","lines":["e"]},{"start":{"row":246,"column":16},"end":{"row":246,"column":17},"action":"insert","lines":["r"]}],[{"start":{"row":246,"column":13},"end":{"row":246,"column":17},"action":"remove","lines":["user"],"id":187},{"start":{"row":246,"column":13},"end":{"row":246,"column":23},"action":"insert","lines":["userStatus"]}],[{"start":{"row":246,"column":24},"end":{"row":246,"column":25},"action":"insert","lines":[" "],"id":188},{"start":{"row":246,"column":25},"end":{"row":246,"column":26},"action":"insert","lines":[">"]}],[{"start":{"row":246,"column":26},"end":{"row":246,"column":27},"action":"insert","lines":[" "],"id":189}],[{"start":{"row":246,"column":26},"end":{"row":246,"column":27},"action":"remove","lines":[" "],"id":190},{"start":{"row":246,"column":25},"end":{"row":246,"column":26},"action":"remove","lines":[">"]}],[{"start":{"row":246,"column":25},"end":{"row":246,"column":26},"action":"insert","lines":["="],"id":191},{"start":{"row":246,"column":26},"end":{"row":246,"column":27},"action":"insert","lines":[">"]}],[{"start":{"row":246,"column":27},"end":{"row":246,"column":28},"action":"insert","lines":[" "],"id":192}],[{"start":{"row":246,"column":28},"end":{"row":246,"column":29},"action":"insert","lines":["1"],"id":193}],[{"start":{"row":254,"column":40},"end":{"row":255,"column":0},"action":"insert","lines":["",""],"id":194},{"start":{"row":255,"column":0},"end":{"row":255,"column":8},"action":"insert","lines":["        "]},{"start":{"row":255,"column":8},"end":{"row":255,"column":9},"action":"insert","lines":["e"]},{"start":{"row":255,"column":9},"end":{"row":255,"column":10},"action":"insert","lines":["c"]},{"start":{"row":255,"column":10},"end":{"row":255,"column":11},"action":"insert","lines":["h"]},{"start":{"row":255,"column":11},"end":{"row":255,"column":12},"action":"insert","lines":["o"]}],[{"start":{"row":255,"column":12},"end":{"row":255,"column":13},"action":"insert","lines":[" "],"id":195},{"start":{"row":255,"column":13},"end":{"row":255,"column":14},"action":"insert","lines":["$"]},{"start":{"row":255,"column":14},"end":{"row":255,"column":15},"action":"insert","lines":["u"]},{"start":{"row":255,"column":15},"end":{"row":255,"column":16},"action":"insert","lines":["s"]},{"start":{"row":255,"column":16},"end":{"row":255,"column":17},"action":"insert","lines":["e"]}],[{"start":{"row":255,"column":13},"end":{"row":255,"column":17},"action":"remove","lines":["$use"],"id":196},{"start":{"row":255,"column":13},"end":{"row":255,"column":23},"action":"insert","lines":["$userSatus"]}],[{"start":{"row":255,"column":23},"end":{"row":255,"column":24},"action":"insert","lines":[";"],"id":197}],[{"start":{"row":254,"column":20},"end":{"row":254,"column":21},"action":"remove","lines":["="],"id":198}],[{"start":{"row":254,"column":20},"end":{"row":254,"column":21},"action":"insert","lines":[" "],"id":199}],[{"start":{"row":254,"column":21},"end":{"row":254,"column":31},"action":"insert","lines":["$userSatus"],"id":200}],[{"start":{"row":254,"column":31},"end":{"row":254,"column":32},"action":"insert","lines":[" "],"id":201},{"start":{"row":254,"column":32},"end":{"row":254,"column":33},"action":"insert","lines":["="]},{"start":{"row":254,"column":33},"end":{"row":254,"column":34},"action":"insert","lines":["="]}],[{"start":{"row":255,"column":8},"end":{"row":255,"column":24},"action":"remove","lines":["echo $userSatus;"],"id":202}],[{"start":{"row":264,"column":6},"end":{"row":264,"column":7},"action":"insert","lines":["\\"],"id":203}],[{"start":{"row":264,"column":6},"end":{"row":264,"column":7},"action":"remove","lines":["\\"],"id":204}],[{"start":{"row":264,"column":6},"end":{"row":265,"column":0},"action":"insert","lines":["",""],"id":205},{"start":{"row":265,"column":0},"end":{"row":265,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":265,"column":0},"end":{"row":265,"column":4},"action":"remove","lines":["    "],"id":206},{"start":{"row":265,"column":0},"end":{"row":277,"column":6},"action":"insert","lines":["    public function updateLastActivityById($userId , $userSatus)","    {","        $userSatus = $userSatus == \"online\" ? 1 : 0; ","        ","        if($this->data([","            ","            \"lastActivity\" => date( 'Y-m-d H:i:s', time() ) ,","            \"userStatus\" => $userSatus","        ])->where(\" id = ? \" , $userId)->update(\"app_users\"))","        {","            return true;","        }","    } "]}],[{"start":{"row":265,"column":20},"end":{"row":265,"column":42},"action":"remove","lines":["updateLastActivityById"],"id":207},{"start":{"row":265,"column":20},"end":{"row":265,"column":40},"action":"insert","lines":["updateLastStatusById"]}],[{"start":{"row":271,"column":10},"end":{"row":271,"column":61},"action":"remove","lines":["  \"lastActivity\" => date( 'Y-m-d H:i:s', time() ) ,"],"id":208}],[{"start":{"row":270,"column":0},"end":{"row":271,"column":10},"action":"remove","lines":["            ","          "],"id":209},{"start":{"row":269,"column":24},"end":{"row":270,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":311,"column":4},"end":{"row":311,"column":7},"action":"insert","lines":["// "],"id":210},{"start":{"row":312,"column":4},"end":{"row":312,"column":7},"action":"insert","lines":["// "]},{"start":{"row":313,"column":4},"end":{"row":313,"column":7},"action":"insert","lines":["// "]},{"start":{"row":314,"column":4},"end":{"row":314,"column":7},"action":"insert","lines":["// "]},{"start":{"row":315,"column":4},"end":{"row":315,"column":7},"action":"insert","lines":["// "]},{"start":{"row":316,"column":4},"end":{"row":316,"column":7},"action":"insert","lines":["// "]},{"start":{"row":317,"column":4},"end":{"row":317,"column":7},"action":"insert","lines":["// "]},{"start":{"row":318,"column":4},"end":{"row":318,"column":7},"action":"insert","lines":["// "]},{"start":{"row":319,"column":4},"end":{"row":319,"column":7},"action":"insert","lines":["// "]},{"start":{"row":320,"column":4},"end":{"row":320,"column":7},"action":"insert","lines":["// "]},{"start":{"row":321,"column":4},"end":{"row":321,"column":7},"action":"insert","lines":["// "]},{"start":{"row":322,"column":4},"end":{"row":322,"column":7},"action":"insert","lines":["// "]},{"start":{"row":323,"column":4},"end":{"row":323,"column":7},"action":"insert","lines":["// "]},{"start":{"row":324,"column":4},"end":{"row":324,"column":6},"action":"insert","lines":["//"]},{"start":{"row":325,"column":4},"end":{"row":325,"column":7},"action":"insert","lines":["// "]},{"start":{"row":327,"column":4},"end":{"row":327,"column":7},"action":"insert","lines":["// "]},{"start":{"row":328,"column":4},"end":{"row":328,"column":7},"action":"insert","lines":["// "]}]]},"ace":{"folds":[{"start":{"row":253,"column":5},"end":{"row":264,"column":4},"placeholder":"..."},{"start":{"row":312,"column":8},"end":{"row":328,"column":4},"placeholder":"..."}],"scrolltop":5123.5,"scrollleft":0,"selection":{"start":{"row":311,"column":0},"end":{"row":328,"column":8},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":294,"state":"php-qqstring","mode":"ace/mode/php"}},"timestamp":1672422090148,"hash":"a14c7e8ca7eff8210123ae04d7e291c7e1ae5b93"}